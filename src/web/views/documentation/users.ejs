<div class="doc-section">

    <!-- ======================================================
    USERS - GET ALL
    ========================================================= -->

    <div class="card card--doc">
        <p id="users-list">
            <span class="method">GET</span> <code>/api/users</code> - Liste des
            utilisateurs
        </p>

        <!-- ========== SUCCESS ========== -->
        <details>
            <summary>Réponses valides</summary>

            <p class="example-title">
            Réponse <span class="badge doc-badge--success">200 OK</span> :
            </p>

            <pre><code>{
    "success": true,
    "count": 14,
    "data": [
        {
            "id": "...",
            "username": "John",
            "email": "john@doe.com"
            "createdAt": "2026-01-15T19:51:21.057Z",
            "updatedAt": "2026-01-15T19:51:37.732Z"
        },
        ...
    ]
}</code></pre>
        </details>
    </div>

    <!-- ======================================================
    USERS - GET BY ID
    ========================================================= -->

    <div class="card card--doc">
        <p id="users-get">
            <span class="method">GET</span> <code>/api/users/:id</code> - Récupérer un
            utilisateur
        </p>

        <!-- ========== SUCCESS ========== -->
        <details>
            <summary>Réponses valides</summary>

            <p class="example-title">
            Réponse <span class="badge doc-badge--success">200 OK</span> :
            </p>

<pre><code>{
    "success": true,
    "data": {
        "id": "...",
        "username": "jdupont",
        "email": "jean@dupont.com",
        "createdAt": "2025-12-20T18:59:00.839Z",
        "updatedAt": "2025-12-20T18:59:00.839Z"
    }
}</code></pre>
        </details>

        <!-- ========== ERRORS ========== -->
        <details>
            <summary>Erreurs possibles</summary>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">400 Bad Request</span> :
            </p>
            
            <!-- IDENTIFIANT UTILISATEUR INVALIDE-->
            <p class="error-type">Identifiant utilisateur invalide</p>
            
<pre><code>{
    "success": false,
    "message": "Identifiant utilisateur invalide."
}</code></pre>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">404 Not Found</span> :
            </p>

            <!-- UTILISATEUR INTROUVABLE -->
            <p class="error-type">Utilisateur introuvable</p>
            
<pre><code>{
    "success": false,
    "message": "Utilisateur introuvable."
}</code></pre>
        </details>
    </div>

    <!-- ======================================================
    USERS - CREATE
    ========================================================= -->

    <div class="card card--doc">
        <p id="users-create">
            <span class="method">POST</span> <code>/api/users</code> - Créer un
            utilisateur
        </p>

        <!-- ========== SUCCESS ========= -->
        <details>
            <summary>Réponses valides</summary>

            <p class="example-title">Exemple requête :</p>

<pre><code>{
    "username": "John",
    "email": "john@doe.com",
    "password": "Password123!"
}</code></pre>

            <p class="example-title">
            Réponse <span class="badge doc-badge--success">201 Created</span> :
            </p>

<pre><code>{
    "success": true,
    "message": "Utilisateur créé avec succès.",
    "data": {
        "id": "...",
        "username": "aLefair",
        "email": "aurelie@lefair.com",
        "createdAt": "2026-01-15T21:03:35.601Z",
        "updatedAt": "2026-01-15T21:03:35.601Z"
    }
}</code></pre>
        </details>

        <!-- ========== ERRORS ========== -->
        <details>
            <summary>Erreurs possibles</summary>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">400 Bad Request</span> :
            </p>

            <!-- CHAMP NON AUTORISÉ -->
            <p class="error-type">Champ(s) non autorisé(e)</p>

<pre><code>{
    "success": false,
    "message": "Champ(s) non autorisé(s) : nom_du_champ."
}</code></pre>

            <!-- CHAMPS REQUIS -->
            <p class="error-type">Contrôle des champs requis</p>
            
<pre><code>{
    "success": false,
    "message": "Donnée(s) invalide(s).",
    "errors": {
        "username": "Le nom d'utilisateur est requis.",
        "email": "L'email est requis.",
        "password": "Le mot de passe est requis."
    }
}</code></pre>

            <!-- DONNÉES INVALIDES -->
            <p class="error-type">Contrôle de validation des champs</p>
            
<pre><code>{
    "success": false,
    "message": "Donnée(s) invalide(s).",
    "errors": {
        "username": "Le nom d'utilisateur doit contenir entre 3 et 20 caractères (lettres, chiffres, - ou _).",
        "email": "Format d'email invalide (ex : nom@domaine.com).",
        "password": {
            "minLength": "8 caractères minimum requis",
            "lowercase": "1 lettre minuscule requise",
            "uppercase": "1 lettre majuscule requise",
            "number": "1 chiffre requis",
            "special": "1 caractère spécial requis"
        }
    }
}</code></pre>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">409 Conflict</span> :
            </p>

            <!-- CONFLIT EMAIL -->
            <p class="error-type">Contrôle d'unicité</p>

<pre><code>{
    "success": false,
    "message": "Impossible de créer l'utilisateur."
    "errors": {
        "email": "Un utilisateur avec cet email existe déjà."
    }  
}</code></pre>
        </details>
    </div>

    <!-- ======================================================
    USERS - UPDATE (without password)
    ========================================================= -->

    <div class="card card--doc">
        <p id="users-update">
            <span class="method">PUT</span> <code>/api/users/:id</code> - Modifier
            username / email
        </p>

        <!-- ========== SUCCESS ========== -->
        <details>
            <summary>Réponses valides</summary>

            <p class="example-title">Exemple requête :</p>

<pre><code>{
    "username": "aLeFebvre",
    "email" : "aurelie@lefebvre.com"
}</code></pre>

            <p class="example-title">
            Réponse <span class="badge doc-badge--success">200 OK</span> :
            </p>

<pre><code>{
    "success": true,
    "message": "Utilisateur mis à jour.",
    "data": {
        "id": "...",
        "username": "nouvelUsername",
        "email": "nouvel@email.com",
        "createdAt": "2026-01-15T19:51:21.057Z",
        "updatedAt": "2026-01-16T14:15:36.570Z"
    }
}</code></pre>
        </details>

        <!-- ========== ERRORS ========== -->
        <details>
            <summary>Erreurs possibles</summary>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">400 Bad Request</span> :
            </p>

            <!-- IDENTIFIANT INVALIDE -->
            <p class="error-type">Identifiant invalide</p>

<pre><code>{
    "success": false,
    "message": "Identifiant utilisateur invalide."
}</code></pre>

            <!-- CHAMP NON AUTORISÉ -->
            <p class="error-type">Champ(s) non autorisé(e)</p>

<pre><code>{
    "success": false,
    "message": "Champ(s) non autorisé(s) : nom_du_champ."
}</code></pre>

            <!-- AUCUNE DONNÉE VALIDE À METTRE À JOUR -->
            <p class="error-type">Aucune donnée valide à mettre à jour</p>

<pre><code>{
    "success": false,
    "message": "Aucune donnée valide à mettre à jour."
}</code></pre>

            <!-- NOM D'UTILISATEUR OU FORMAT D'EMAIL INVALIDE -->
            <p class="error-type">Nom d'utilisateur ou format d'email invalide</p>

<pre><code>{
    "success": false,
    "message": "Donnée(s) invalide(s).",
    "errors": {
        "username": "Le nom d'utilisateur doit contenir entre 3 et 20 caractères (lettres, chiffres, - ou _).",
        "email": "Format d'email invalide (ex : nom@domaine.com)."
    }
}</code></pre>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">404 Not Found</span> :
            </p>

            <!-- UTILISATEUR INTROUVABLE -->
            <p class="error-type">Utilisateur introuvable</p>

<pre><code>{
    "success": false,
    "message": "Utilisateur introuvable.",
    "context": {
        "userId": "..."
    }
}</code></pre>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">409 Conflict</span> :
            </p>
            
            <!-- CONFLIT EMAIL -->
            <p class="error-type">Contrôle d'unicité</p>

<pre><code>{
    "success": false,
    "message": "Impossible de mettre à jour l'utilisateur.",
    "errors": {
        "email": "Un utilisateur avec cet email existe déjà."
    }
}</code></pre>
        </details>
    </div>

    <!-- ======================================================
    USERS - UPDATE PASSWORD
    ========================================================= -->

    <div class="card card--doc">
        <p id="users-password">
            <span class="method">PUT</span> <code>/api/users/:id/password</code> -
            Modifier mot de passe
        </p>

        <!-- ========== SUCCESS ========== -->
        <details>
            <summary>Réponses valides</summary>

            <p class="example-title">Exemple requête :</p>

<pre><code>{
    "newPassword": "Nouveau123!"
}</code></pre>

            <p class="example-title">
            Réponse <span class="badge doc-badge--success">200 OK</span> :
            </p>

<pre><code>{
    "success": true,
    "message": "Nouveau mot de passe enregistré."
}</code></pre>
        </details>

        <!-- ========== ERRORS ========== -->
        <details>
            <summary>Erreurs possibles</summary>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">400 Bad Request</span> :
            </p>

            <!-- IDENTIFIANT INVALIDE -->
            <p class="error-type">Identifiant invalide</p>

<pre><code>{
    "success": false,
    "message": "Identifiant utilisateur invalide."
}</code></pre>

            <!-- LE NOUVEAU MOT DE PASSE EST REQUIS -->
            <p class="error-type">Le nouveau mot de passe est requis</p>

<pre><code>{
    "success": false,
    "message": "Le nouveau mot de passe est requis."
}</code></pre>

            <!-- CHAMP NON AUTORISÉ -->
            <p class="error-type">Champ(s) non autorisé(e)</p>

<pre><code>{
    "success": false,
    "message": "Champ(s) non autorisé(s) : nom_du_champ."
}</code></pre>

            <!-- MOT DE PASSE INVALIDE -->
            <p class="error-type">Mot de passe invalide</p>

<pre><code>{
    "success": false,
    "message": "Mot de passe invalide.",
    "errors": {
        "minLength": "8 caractères minimum requis",
        "uppercase": "1 lettre majuscule requise",
        "lowercase": "1 lettre majuscule requise",
        "number": "1 chiffre requis",
        "special": "1 caractère spécial requis"
    }
}</code></pre>

            <!-- NOUVEAU DIFFÉRENT DE L'ANCIEN -->
            <p class="error-type">Mot de passe invalide</p>

<pre><code>{
    "success": false,
    "message": "Le nouveau mot de passe doit être différent de l'ancien."
}</code></pre>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">404 Not Found</span> :
            </p>

            <!-- UTILISATEUR INTROUVABLE -->
            <p class="error-type">Utilisateur introuvable</p>

<pre><code>{
    "success": false,
    "message": "Utilisateur introuvable.",
    "context": {
        "userId": "..."
    }
}</code></pre>
        </details>
    </div>

    <!-- ======================================================
    USERS - DELETE
    ========================================================= -->

    <div class="card card--doc">
        <p id="users-delete">
            <span class="method">DELETE</span> <code>/api/users/:id</code> - Supprimer
            un utilisateur
        </p>

        <!-- ========== SUCCESS ========== -->
        <details>
            <summary>Réponses valides</summary>

            <p class="example-title">
            Réponse <span class="badge doc-badge--success">200 OK</span> :
            </p>

<pre><code>{
    "success": true,
    "message": "Utilisateur supprimé avec succès.",
    "data": {
        "id": "...",
        "username": "jDoe",
        "email": "john@doe.com",
        "createdAt": "2026-01-17T15:09:28.636Z",
        "updatedAt": "2026-01-17T15:09:28.636Z"
    }
}</code></pre>
        </details>
        
        <!-- ========== ERRORS ========== -->
        <details>
            <summary>Erreurs possibles</summary>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">400 Bad Request</span> :
            </p>

            <!-- IDENTIFIANT INVALIDE -->
            <p class="error-type">Identifiant invalide</p>

<pre><code>{
    "success": false,
    "message": "Identifiant utilisateur invalide."
}</code></pre>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">403 Forbidden</span> :
            </p>

            <!-- SUPPRESSION IMPOSSIBLE -->
            <p class="error-type">Suppression impossible</p>

<pre><code>{
    "success": false,
    "message": "Vous ne pouvez pas supprimer votre propre compte."
}</code></pre>

            <p class="example-title">
            Erreur <span class="badge doc-badge--error">404 Not Found</span> :
            </p>

            <!-- UTILISATEUR INTROUVABLE -->
            <p class="error-type">Utilisateur introuvable</p>

<pre><code>{
    "success": false,
    "message": "Utilisateur introuvable.",
    "context": {
        "userId": "..."
    }
}</code></pre>
        </details>
    </div>
</div>